**生产者与消费者问题**

**实验目的**：

了解和熟悉linux系统下的信号量集和共享内存。

**实验任务：**

使用linux系统提供的信号量集（semget、semop、semctl等系统调用）和共享内存（shmget、shmat、shmdt、shmctl等系统调用）实现生产者和消费者问题。

**实验要求：**

1.  写两个程序，一个模拟生产者过程，一个模拟消费者过程；

2.  创建一个共享内存来模拟生产者-消费者问题中缓冲队列，该缓冲队列有N（例如N=10）个缓冲区，每个缓冲区的大小为1024B，每个生产者和消费者对缓冲区必须互斥访问；缓冲队列除了N个缓冲区外，还有一个指向第一个空缓冲区的指针in，一个指向第一个满缓冲区的指针out；

3.  由第一个生产者创建信号量集和共享内存，其他生产者和消费者可以使用该信号量集和共享内存；

4.  生产者程序：生产者生产产品（即是从键盘输入长度小于1024B的字符）放入空的缓冲区；

5.  消费者程序：消费者消费产品（即从满的缓冲区中取出内容在屏幕上打印出来），然后满的缓冲区变为空的缓冲区；

6.  多次运行生产者程序和消费者进程，同时产生多个生产者进程和多个消费者进程，这些进程共享这些信号量和共享内存，实现生产者和消费者问题；

7.  在生产者程序中，可以选择：

    1.  生产产品；

    2.  退出。退出进程，但信号量和共享内存仍然存在，其他生产者进程和消费者进程还可以继续使用；

    3.  删除信号量和共享内存。显性删除信号量和共享内存，后续其他生产者进程和消费者进程都不能使用这些信号量和共享内存。

8.  在消费者程序中，可以选择：

(1) 消费产品；

(2) 退出。退出进程，但信号量和共享内存仍然存在，其他生产者进程和消费者进程还可以继续使用；

(3) 删除信号量和共享内存。显性删除信号量和共享内存，后续其他生产者进程和消费者进程都不能使用这些信号量和共享内存。

**上交要求：**

-   上交一份实验报告和源程序，实验报告包括：程序代码、运行结果、实验总结

-   实验报告命名方式：学号_姓名_ProducerComsumer.docx，生产者源程序命名也为：Producer.c或.cpp，消费者源程序命名为：Comsumer.c或.cpp，将源程序和实验报告打包为：学号_姓名_ProducerComsumer.rar，然后将打包文件发送到邮箱：os_experiment@126.com

-   上交截止时间：10月24日24：00
